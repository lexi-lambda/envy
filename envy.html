<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>Envy: An environment variable manager</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="envy.html" class="tocviewselflink" data-pltdoc="x">Envy:<span class="mywbr"> &nbsp;</span> An environment variable manager</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="envy.html#%28part._quickstart%29" class="tocviewlink" data-pltdoc="x">Quickstart via <span class="stt">#lang envy</span></a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="envy.html#%28part._syntax%29" class="tocviewlink" data-pltdoc="x">Using Envy with S-<wbr></wbr>expression syntax</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="envy.html#%28part._api-reference%29" class="tocviewlink" data-pltdoc="x">API Reference</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Envy__.An_environment_variable_manager%29" class="tocsubseclink" data-pltdoc="x">Envy:<span class="mywbr"> &nbsp;</span> An environment variable manager</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._quickstart%29" class="tocsubseclink" data-pltdoc="x">Quickstart via <span class="stt">#lang envy</span></a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Specifying_types%29" class="tocsubseclink" data-pltdoc="x">Specifying types</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Providing_defaults%29" class="tocsubseclink" data-pltdoc="x">Providing defaults</a></td></tr><tr><td><span class="tocsublinknumber">1.3<tt>&nbsp;</tt></span><a href="#%28part._.Using_explicit_environment_variable_names%29" class="tocsubseclink" data-pltdoc="x">Using explicit environment variable names</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._syntax%29" class="tocsubseclink" data-pltdoc="x">Using Envy with S-<wbr></wbr>expression syntax</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part.__lang_envy_s-exp%29" class="tocsubseclink" data-pltdoc="x"><span class="stt">#lang envy/<span class="mywbr"> &nbsp;</span>s-<wbr></wbr>exp</span></a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._.The_envy_module%29" class="tocsubseclink" data-pltdoc="x">The <span class="RktModLink"><span class="RktSym">envy</span></span> module</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._api-reference%29" class="tocsubseclink" data-pltdoc="x">API Reference</a></td></tr><tr><td><a href="#%28form._%28%28lib._envy%2Fmain..rkt%29._define-environment%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>environment</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._envy%2Fmain..rkt%29._define%2Fprovide-environment%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define/<span class="mywbr"> &nbsp;</span>provide-<wbr></wbr>environment</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._envy%2Fmain..rkt%29._define-environment-variable%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>environment-<wbr></wbr>variable</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">6.6.0.3</span></div><h2><a name="(part._.Envy__.An_environment_variable_manager)"></a><a name="(mod-path._envy)"></a>Envy: An environment variable manager</h2><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><a href="http://pkg-build.racket-lang.org/doc/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="envy.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy</span></a></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <span class="stt">envy</span></span></td></tr></table></p><p>All applications need some degree of configuration. Some options can be provided as command-line
flags, but often the configuration is too complex to be specified in this way. For all non-trivial
configuration, <a href="http://12factor.net/config">applications should store configuration in the
environment</a> to stay organized and to remain portable.</p><p>Envy helps keep environment variables in order by creating a way to declaratively specify all of your
app&rsquo;s environment variables in one place, automatically wrap them in a module, parse them from raw
strings into a variety of different datatypes, and even properly associate them with Typed Racket
types.</p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="envy.html#%28part._quickstart%29" class="toptoclink" data-pltdoc="x">1<span class="hspace">&nbsp;</span>Quickstart via <span class="stt">#lang envy</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="envy.html#%28part._.Specifying_types%29" class="toclink" data-pltdoc="x">1.1<span class="hspace">&nbsp;</span>Specifying types</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="envy.html#%28part._.Providing_defaults%29" class="toclink" data-pltdoc="x">1.2<span class="hspace">&nbsp;</span>Providing defaults</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="envy.html#%28part._.Using_explicit_environment_variable_names%29" class="toclink" data-pltdoc="x">1.3<span class="hspace">&nbsp;</span>Using explicit environment variable names</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="envy.html#%28part._syntax%29" class="toptoclink" data-pltdoc="x">2<span class="hspace">&nbsp;</span>Using Envy with S-expression syntax</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="envy.html#%28part.__lang_envy_s-exp%29" class="toclink" data-pltdoc="x">2.1<span class="hspace">&nbsp;</span><span class="stt">#lang envy/s-exp</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="envy.html#%28part._.The_envy_module%29" class="toclink" data-pltdoc="x">2.2<span class="hspace">&nbsp;</span>The <span class="RktModLink"><span class="RktSym">envy</span></span> module</a></p></td></tr><tr><td><p><span class="hspace"></span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="envy.html#%28part._api-reference%29" class="toptoclink" data-pltdoc="x">3<span class="hspace">&nbsp;</span>API Reference</a></p></td></tr></table><h3>1<tt>&nbsp;</tt><a name="(part._quickstart)"></a>Quickstart via <span class="stt">#lang envy</span></h3><p>To get started, create a module to manage your application&rsquo;s environment variables (e.g.
<span class="RktSym">environment.rkt</span><span class="RktMeta"></span>).</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="http://pkg-build.racket-lang.org/doc/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="envy.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy</span></a><span class="RktMeta"></span></td></tr></table></blockquote><p>To specify which environment variables your application depends on, specify each variable&rsquo;s name on a
separate line:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="http://pkg-build.racket-lang.org/doc/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="envy.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">some-environment-variable</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">another-environment-variable</span><span class="RktMeta"></span></td></tr></table></blockquote><p>Each line of your environment manifest will produce a variable with the given name bound to the value
of the equivalent environment variable. The name of the environment variable will be generated from
the name of the Racket variable by converting the identifier to <span class="stt">ALL_CAPS</span>, converting dashes to
underscores, and stripping question marks. In the above example, Envy would fetch the values for
<span class="stt">SOME_ENVIRONMENT_VARIABLE</span> and <span class="stt">ANOTHER_ENVIRONMENT_VARIABLE</span>.</p><p>When the module runs, the values for the specified variables will be loaded, but it&rsquo;s possible that
the variables don&rsquo;t actually exist in the environment. In this case, an error will be thrown.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="http://pkg-build.racket-lang.org/doc/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="envy.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">some-environment-variable</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span></td></tr><tr><td><p><span class="RktErr">envy: The required environment variable</span></p></td></tr><tr><td><p><span class="RktErr">"SOME_ENVIRONMENT_VARIABLE" is not defined.</span></p></td></tr></table></blockquote><p>If the environment variable <span style="font-style: italic">does</span> exist, its value will be stored in the binding.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="http://pkg-build.racket-lang.org/doc/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="envy.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">some-environment-variable</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">another-environment-variable</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktSym">some-environment-variable</span></td></tr><tr><td><p><span class="RktOut">- : String</span></p></td></tr><tr><td><p><span class="RktRes">"some value"</span></p></td></tr></table></blockquote><p>To use the values of these environment variables in another module, just <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span> the module,
optionally with a prefix.</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._prefix-in%29%29" class="RktStxLink" data-pltdoc="x">prefix-in</a></span><span class="hspace">&nbsp;</span><span class="RktSym">env:</span><span class="hspace">&nbsp;</span><span class="RktVal">"environment.rkt"</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><h4>1.1<tt>&nbsp;</tt><a name="(part._.Specifying_types)"></a>Specifying types</h4><p>All environment variables are natively strings, but it is extremely common to store other kinds of
configuration data, such as booleans and numbers. Envy permits specifying a type with each variable,
and it will automatically parse the value to match the specified type.</p><p>For example, given the following environment:</p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">HOST=racket-lang.org</span></p></td></tr><tr><td><p><span class="stt">PARALLEL=true</span></p></td></tr><tr><td><p><span class="stt">THREADS=42</span></p></td></tr></table></p><p>...one could use the following environment definition:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">host</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~3a%29%29" class="RktStxLink" data-pltdoc="x">:</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.String%29%29" class="RktStxLink" data-pltdoc="x">String</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">parallel?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~3a%29%29" class="RktStxLink" data-pltdoc="x">:</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Boolean%29%29" class="RktStxLink" data-pltdoc="x">Boolean</a></span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktSym">threads</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~3a%29%29" class="RktStxLink" data-pltdoc="x">:</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Positive-.Integer%29%29" class="RktStxLink" data-pltdoc="x">Positive-Integer</a></span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktSym">host</span></td></tr><tr><td><p><span class="RktOut">- : String</span></p></td></tr><tr><td><p><span class="RktRes">"racket-lang.org"</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktSym">parallel?</span></td></tr><tr><td><p><span class="RktOut">- : Boolean</span></p></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktSym">threads</span></td></tr><tr><td><p><span class="RktOut">- : Integer [more precisely: Positive-Integer]</span></p></td></tr><tr><td><p><span class="RktRes">42</span></p></td></tr></table></blockquote><p>Note that the values are defined with the specified types, useful for Typed Racket users. Also, since
<span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.String%29%29" class="RktStxLink" data-pltdoc="x">String</a></span> is the default type, including it is not strictly necessary.</p><h4>1.2<tt>&nbsp;</tt><a name="(part._.Providing_defaults)"></a>Providing defaults</h4><p>Sometimes, configuration variables may be optional, in which case it is useful to provide a default
value instead of raising an error upon an undefined variable. This can be done with the
<span class="RktPn">#:default</span> option.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">optional-value</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:default</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktMeta"></span></td></tr></table></blockquote><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktSym">optional-value</span></td></tr><tr><td><p><span class="RktOut">- : (U False String)</span></p></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr></table></blockquote><p>Note that the type is still properly preserved for Typed Racket users, so if the default value&rsquo;s type
is different from the type of the environment variable, the resulting type will be a union.</p><h4>1.3<tt>&nbsp;</tt><a name="(part._.Using_explicit_environment_variable_names)"></a>Using explicit environment variable names</h4><p>Sometimes it is desired to define a variable with a different name from the name used in the
environment. This can be done with the <span class="RktPn">#:name</span> option.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">custom-name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"ENVIRONMENT_NAME"</span><span class="RktMeta"></span></td></tr></table></blockquote><h3>2<tt>&nbsp;</tt><a name="(part._syntax)"></a>Using Envy with S-expression syntax</h3><p>Envy&rsquo;s syntax does not look like traditional S-expressions, but in fact it is just using ordinary
Racket syntax with a special reader, called
<a href="http://pkg-build.racket-lang.org/doc/sweet/index.html" data-pltdoc="x">&#8220;sweet expressions&#8221;</a>. The ordinary, S-expression
based syntax is exposed through the <a href="envy.html#%28mod-path._envy%2Fs-exp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy/s-exp</span></a> language, as well as the
<a href="envy.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy</span></a> module, which can be used in any Typed Racket module via <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span>.</p><h4>2.1<tt>&nbsp;</tt><a name="(part.__lang_envy_s-exp)"></a><a name="(mod-path._envy/s-exp)"></a><span class="stt">#lang envy/s-exp</span></h4><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><a href="http://pkg-build.racket-lang.org/doc/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="envy.html#%28mod-path._envy%2Fs-exp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy/s-exp</span></a></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <span class="stt">envy</span></span></td></tr></table></p><p>The <a href="envy.html#%28mod-path._envy%2Fs-exp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy/s-exp</span></a> language works exactly like the <a href="envy.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy</span></a> language, but it
does not enable the sweet expression reader. Each declaration must be properly grouped.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="http://pkg-build.racket-lang.org/doc/guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><a href="envy.html#%28mod-path._envy%2Fs-exp%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy/s-exp</span></a><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">some-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~3a%29%29" class="RktStxLink" data-pltdoc="x">:</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Positive-.Integer%29%29" class="RktStxLink" data-pltdoc="x">Positive-Integer</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:default</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">#f</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr><tr><td><span class="RktMeta"></span><span class="RktPn">[</span><span class="RktSym">another-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~3a%29%29" class="RktStxLink" data-pltdoc="x">:</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Boolean%29%29" class="RktStxLink" data-pltdoc="x">Boolean</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">#:name</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"CUSTOM</span><span class="hspace">&nbsp;</span><span class="RktVal">NAME"</span><span class="RktPn">]</span><span class="RktMeta"></span></td></tr></table></blockquote><p>This language works just like using the <a href="envy.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy</span></a> module directly, but its body is wrapped
in <span class="RktSym"><a href="envy.html#%28form._%28%28lib._envy%2Fmain..rkt%29._define%2Fprovide-environment%29%29" class="RktStxLink" data-pltdoc="x">define/provide-environment</a></span>.</p><h4>2.2<tt>&nbsp;</tt><a name="(part._.The_envy_module)"></a>The <a href="envy.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy</span></a> module</h4><p>Using <a href="envy.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy</span></a> as a module imports the Envy API, which allows embedding Envy&rsquo;s
functionality in larger modules.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><a href="envy.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">envy</span></a><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="envy.html#%28form._%28%28lib._envy%2Fmain..rkt%29._define%2Fprovide-environment%29%29" class="RktStxLink" data-pltdoc="x">define/provide-environment</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">some-var</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~3a%29%29" class="RktStxLink" data-pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Positive-.Integer%29%29" class="RktStxLink" data-pltdoc="x">Positive-Integer</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:default</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">another-var</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~3a%29%29" class="RktStxLink" data-pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Boolean%29%29" class="RktStxLink" data-pltdoc="x">Boolean</a></span><span class="hspace">&nbsp;</span><span class="RktPn">#:name</span><span class="hspace">&nbsp;</span><span class="RktVal">"CUSTOM NAME"</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>For full information on all the forms provided by Envy, see the <a href="envy.html#%28part._api-reference%29" data-pltdoc="x">API Reference</a>.</p><h3>3<tt>&nbsp;</tt><a name="(part._api-reference)"></a>API Reference</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._envy/main..rkt)._define-environment))"></a><span title="Provided from: envy | Package: envy"><span class="RktSym"><a href="envy.html#%28form._%28%28lib._envy%2Fmain..rkt%29._define-environment%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-environment</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">clause</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">name-id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">[</span><span class="RktVar">name-id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-type</span><span class="hspace">&nbsp;</span><span class="RktVar">option</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-type</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/special-forms.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fprims..rkt%29._~3a%29%29" class="RktStxLink" data-pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktVar">type-id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">option</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:name</span><span class="hspace">&nbsp;</span><span class="RktVar">env-var-name-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:default</span><span class="hspace">&nbsp;</span><span class="RktVar">default-expr</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Defines a set of variables to be initialized with values from the environment.</div></p><p>Each <span class="RktVar">name-id</span> is assigned the value of the environment variable with the name
<span class="RktVar">env-var-name-expr</span>. If no <span class="RktVar">env-var-name-expr</span> is provided, the environment variable
name is inferred based on <span class="RktVar">name-id</span>: the identifier is converted to all caps, all dashes are
converted to underscores, and all question marks are stripped.</p><p>Before being assigned to <span class="RktVar">name-id</span>, the value of the environment variable is parsed based on
<span class="RktVar">type-id</span>. If no <span class="RktVar">type-id</span> is provided, the type is inferred to be <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.String%29%29" class="RktStxLink" data-pltdoc="x">String</a></span>.
The following types are supported:</p><ul><li><p><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.String%29%29" class="RktStxLink" data-pltdoc="x">String</a></span></p></li><li><p><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Symbol%29%29" class="RktStxLink" data-pltdoc="x">Symbol</a></span></p></li><li><p><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Boolean%29%29" class="RktStxLink" data-pltdoc="x">Boolean</a></span> (must be either <span class="RktVal">"true"</span> or <span class="RktVal">"false"</span>)</p></li><li><p><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Number%29%29" class="RktStxLink" data-pltdoc="x">Number</a></span></p></li><li><p><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Integer%29%29" class="RktStxLink" data-pltdoc="x">Integer</a></span></p></li><li><p><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Positive-.Integer%29%29" class="RktStxLink" data-pltdoc="x">Positive-Integer</a></span></p></li><li><p><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Negative-.Integer%29%29" class="RktStxLink" data-pltdoc="x">Negative-Integer</a></span></p></li><li><p><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/ts-reference/type-ref.html#%28form._%28%28lib._typed-racket%2Fbase-env%2Fbase-types..rkt%29._.Nonnegative-.Integer%29%29" class="RktStxLink" data-pltdoc="x">Nonnegative-Integer</a></span></p></li></ul><p>If the specified variable does not exist in the environment, <span class="RktVar">name-id</span> is set to the value of
<span class="RktVar">default-expr</span>. If no <span class="RktVar">default-expr</span> is provided, an error is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._envy/main..rkt)._define/provide-environment))"></a><span title="Provided from: envy | Package: envy"><span class="RktSym"><a href="envy.html#%28form._%28%28lib._envy%2Fmain..rkt%29._define%2Fprovide-environment%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define/provide-environment</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">clause</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Exactly the same as <span class="RktSym"><a href="envy.html#%28form._%28%28lib._envy%2Fmain..rkt%29._define-environment%29%29" class="RktStxLink" data-pltdoc="x">define-environment</a></span> but also <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._provide%29%29" class="RktStxLink" data-pltdoc="x">provide</a></span>s each <span class="RktVar">name-id</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._envy/main..rkt)._define-environment-variable))"></a><span title="Provided from: envy | Package: envy"><span class="RktSym"><a href="envy.html#%28form._%28%28lib._envy%2Fmain..rkt%29._define-environment-variable%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-environment-variable</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name-id</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-type</span><span class="hspace">&nbsp;</span><span class="RktVar">option</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Exactly the same as <span class="RktSym"><a href="envy.html#%28form._%28%28lib._envy%2Fmain..rkt%29._define-environment%29%29" class="RktStxLink" data-pltdoc="x">define-environment</a></span> but only defines a single variable. The syntax is
the same as <span class="RktSym"><a href="envy.html#%28form._%28%28lib._envy%2Fmain..rkt%29._define-environment%29%29" class="RktStxLink" data-pltdoc="x">define-environment</a></span>&rsquo;s <span class="RktVar">clause</span>.</div></p></div></div><div id="contextindicator">&nbsp;</div></body></html>